/**
 * @license
 * Pixi.JS - v1.0.0
 * Copyright (c) 2012, Mat Groves
 * http://goodboydigital.com/
 *
 * Compiled: 2013-05-02
 *
 * Pixi.JS is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license.php
 */
function HEXtoRGB(e){return[(255&e>>16)/255,(255&e>>8)/255,(255&e)/255]}function determineMatrixArrayType(){return PIXI.Matrix="undefined"!=typeof Float32Array?Float32Array:Array,PIXI.Matrix}var PIXI=PIXI||{};PIXI.Point=function(e,t){this.x=e||0,this.y=t||0},PIXI.Point.clone=function(){return new PIXI.Point(this.x,this.y)},PIXI.Point.constructor=PIXI.Point,PIXI.Rectangle=function(e,t,r,i){this.x=e||0,this.y=t||0,this.width=r||0,this.height=i||0},PIXI.Rectangle.clone=function(){return new PIXI.Rectangle(this.x,this.y,this.width,this.height)},PIXI.Rectangle.constructor=PIXI.Rectangle,PIXI.DisplayObject=function(){this.position=new PIXI.Point,this.scale=new PIXI.Point(1,1),this.rotation=0,this.alpha=1,this.visible=!0,this.cacheVisible=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this.color=[],this.worldTransform=PIXI.mat3.create(),this.localTransform=PIXI.mat3.create(),this.dynamic=!0,this._sr=0,this._cr=1,this.renderable=!1,this.interactive=!0},PIXI.DisplayObject.constructor=PIXI.DisplayObject,PIXI.DisplayObject.prototype.updateTransform=function(){this.rotation!=this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation));var e=this.localTransform,t=this.parent.worldTransform,r=this.worldTransform;e[0]=this._cr*this.scale.x,e[1]=-this._sr*this.scale.y,e[3]=this._sr*this.scale.x,e[4]=this._cr*this.scale.y,e[2]=this.position.x,e[5]=this.position.y;var i=e[0],a=e[1],o=e[2],s=e[3],n=e[4],h=e[5],c=t[0],d=t[1],u=t[2],l=t[3],I=t[4],f=t[5];r[0]=c*i+d*s,r[1]=c*a+d*n,r[2]=c*o+d*h+u,r[3]=l*i+I*s,r[4]=l*a+I*n,r[5]=l*o+I*h+f,this.worldAlpha=this.alpha*this.parent.worldAlpha},PIXI.DisplayObjectContainer=function(){PIXI.DisplayObject.call(this),this.children=[],this.renderable=!1},PIXI.DisplayObjectContainer.constructor=PIXI.DisplayObjectContainer,PIXI.DisplayObjectContainer.prototype=Object.create(PIXI.DisplayObject.prototype),PIXI.DisplayObjectContainer.prototype.addChild=function(e){void 0!=e.parent&&e.parent.removeChild(e),e.parent=this,e.childIndex=this.children.length,this.children.push(e),this.stage&&this.stage.__addChild(e)},PIXI.DisplayObjectContainer.prototype.addChildAt=function(e,t){if(!(t>=0&&this.children.length>=t))throw Error(e+" The index "+t+" supplied is out of bounds "+this.children.length);void 0!=e.parent&&e.parent.removeChild(e),t==this.children.length?this.children.push(e):this.children.splice(t,0,e),e.parent=this,e.childIndex=t;for(var r=this.children.length,i=t;r>i;i++)this.children[i].childIndex=i;this.stage&&this.stage.__addChild(e)},PIXI.DisplayObjectContainer.prototype.removeChild=function(e){var t=this.children.indexOf(e);if(-1===t)throw Error(e+" The supplied DisplayObject must be a child of the caller "+this);this.stage&&this.stage.__removeChild(e),e.parent=void 0,this.children.splice(t,1);for(var r=t,i=this.children.length;i>r;r++)this.children[r].childIndex-=1},PIXI.DisplayObjectContainer.prototype.contains=function(e){return-1!==this.children.indexOf(e)},PIXI.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible){PIXI.DisplayObject.prototype.updateTransform.call(this);for(var e=0,t=this.children.length;t>e;e++)this.children[e].updateTransform()}},PIXI.blendModes={},PIXI.blendModes.NORMAL=0,PIXI.blendModes.SCREEN=1,PIXI.Sprite=function(e){PIXI.DisplayObjectContainer.call(this),this.anchor=new PIXI.Point,this.texture=e,this.blendMode=PIXI.blendModes.NORMAL,this.width=1,this.height=1,e.baseTexture.hasLoaded?(this.width=this.texture.frame.width,this.height=this.texture.frame.height,this.updateFrame=!0):(this.onTextureUpdateBind=this.onTextureUpdate.bind(this),this.texture.addEventListener("update",this.onTextureUpdateBind)),this.renderable=!0,this.interactive=!1},PIXI.Sprite.constructor=PIXI.Sprite,PIXI.Sprite.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),PIXI.Sprite.prototype.setTexture=function(e){this.texture.baseTexture!=e.baseTexture&&(this.textureChange=!0),this.texture=e,this.width=e.frame.width,this.height=e.frame.height,this.updateFrame=!0},PIXI.Sprite.prototype.setInteractive=function(e){this.interactive=e,this.stage&&(this.stage.dirty=!0)},PIXI.Sprite.prototype.onTextureUpdate=function(){this.width=this.texture.frame.width,this.height=this.texture.frame.height,this.updateFrame=!0},PIXI.Sprite.fromFrame=function(e){var t=PIXI.TextureCache[e];if(!t)throw Error("The frameId '"+e+"' does not exist in the texture cache"+this);return new PIXI.Sprite(t)},PIXI.Sprite.fromImage=function(e){var t=PIXI.Texture.fromImage(e);return new PIXI.Sprite(t)},PIXI.MovieClip=function(e){PIXI.Sprite.call(this,e[0]),this.textures=e,this.currentFrame=0,this.animationSpeed=1,this.playing},PIXI.MovieClip.constructor=PIXI.MovieClip,PIXI.MovieClip.prototype=Object.create(PIXI.Sprite.prototype),PIXI.MovieClip.prototype.stop=function(){this.playing=!1},PIXI.MovieClip.prototype.play=function(){this.playing=!0},PIXI.MovieClip.prototype.gotoAndStop=function(e){this.playing=!1,this.currentFrame=e;var t=0|this.currentFrame+.5;this.setTexture(this.textures[t%this.textures.length])},PIXI.MovieClip.prototype.gotoAndPlay=function(e){this.currentFrame=e,this.playing=!0},PIXI.MovieClip.prototype.updateTransform=function(){if(PIXI.Sprite.prototype.updateTransform.call(this),this.playing){this.currentFrame+=this.animationSpeed;var e=0|this.currentFrame+.5;this.setTexture(this.textures[e%this.textures.length])}},PIXI.InteractionManager=function(e){this.stage=e,this.tempPoint=new PIXI.Point,this.mouseoverEnabled=!0,this.mouse=new PIXI.InteractionData,this.touchs={},this.pool=[],this.interactiveItems=[]},PIXI.InteractionManager.constructor=PIXI.InteractionManager,PIXI.InteractionManager.prototype.disableMouseOver=function(){this.mouseoverEnabled&&(this.mouseoverEnabled=!1,this.target&&this.target.view.removeEventListener("mousemove",this.onMouseMove.bind(this)))},PIXI.InteractionManager.prototype.enableMouseOver=function(){this.mouseoverEnabled||(this.mouseoverEnabled=!1,this.target&&this.target.view.addEventListener("mousemove",this.onMouseMove.bind(this)))},PIXI.InteractionManager.prototype.collectInteractiveSprite=function(e){for(var t=e.children,r=t.length,i=r-1;i>=0;i--){var a=t[i];if(a instanceof PIXI.Sprite)a.interactive&&this.interactiveItems.push(a);else if(!a.interactive)continue;a.children.length>0&&this.collectInteractiveSprite(a)}},PIXI.InteractionManager.prototype.setTarget=function(e){this.target=e,this.mouseoverEnabled&&e.view.addEventListener("mousemove",this.onMouseMove.bind(this),!0),e.view.addEventListener("mousedown",this.onMouseDown.bind(this),!0),e.view.addEventListener("mouseup",this.onMouseUp.bind(this),!0),e.view.addEventListener("mouseout",this.onMouseUp.bind(this),!0),e.view.addEventListener("touchstart",this.onTouchStart.bind(this),!0),e.view.addEventListener("touchend",this.onTouchEnd.bind(this),!0),e.view.addEventListener("touchmove",this.onTouchMove.bind(this),!0)},PIXI.InteractionManager.prototype.hitTest=function(e){this.dirty&&(this.dirty=!1,this.interactiveItems=[],this.collectInteractiveSprite(this.stage));var t=this.tempPoint;this.tempMatrix;for(var r=e.global,i=this.interactiveItems.length,a=0;i>a;a++){var o=this.interactiveItems[a];if(o.visible){var s=o.worldTransform,n=s[0],h=s[1],c=s[2],d=s[3],u=s[4],l=s[5],I=1/(n*u+h*-d);t.x=u*I*r.x+-h*I*r.y+(l*h-c*u)*I,t.y=n*I*r.y+-d*I*r.x+(-l*n+c*d)*I;var f=-o.width*o.anchor.x;if(t.x>f&&t.x<f+o.width){var p=-o.height*o.anchor.y;if(t.y>p&&t.y<p+o.height)return e.local.x=t.x,e.local.y=t.y,o}}}return null},PIXI.InteractionManager.prototype.onMouseMove=function(e){e.preventDefault();var t=this.target.view.getBoundingClientRect();this.mouse.global.x=(e.clientX-t.left)*(this.target.width/t.width),this.mouse.global.y=(e.clientY-t.top)*(this.target.height/t.height);var r=this.hitTest(this.mouse);if(this.currentOver!=r&&(this.currentOver&&(this.mouse.target=this.currentOver,this.currentOver.mouseout&&this.currentOver.mouseout(this.mouse),this.currentOver=null),this.target.view.style.cursor="default"),r){if(this.currentOver==r)return;this.currentOver=r,this.target.view.style.cursor="pointer",this.mouse.target=r,r.mouseover&&r.mouseover(this.mouse)}},PIXI.InteractionManager.prototype.onMouseDown=function(e){var t=this.target.view.getBoundingClientRect();this.mouse.global.x=(e.clientX-t.left)*(this.target.width/t.width),this.mouse.global.y=(e.clientY-t.top)*(this.target.height/t.height);var r=this.hitTest(this.mouse);r&&(this.currentDown=r,this.mouse.target=r,r.mousedown&&r.mousedown(this.mouse))},PIXI.InteractionManager.prototype.onMouseUp=function(){this.currentOver&&(this.mouse.target=this.currentOver,this.currentOver.mouseup&&this.currentOver.mouseup(this.mouse)),this.currentDown&&(this.mouse.target=this.currentDown,this.currentOver==this.currentDown&&this.currentDown.click&&this.currentDown.click(this.mouse),this.currentDown=null)},PIXI.InteractionManager.prototype.onTouchMove=function(e){e.preventDefault();for(var t=this.target.view.getBoundingClientRect(),r=e.changedTouches,i=0;r.length>i;i++){var a=r[i],o=this.touchs[a.identifier];o.global.x=(a.clientX-t.left)*(this.target.width/t.width),o.global.y=(a.clientY-t.top)*(this.target.height/t.height)}},PIXI.InteractionManager.prototype.onTouchStart=function(e){e.preventDefault();for(var t=this.target.view.getBoundingClientRect(),r=e.changedTouches,i=0;r.length>i;i++){var a=r[i],o=this.pool.pop();o||(o=new PIXI.InteractionData),this.touchs[a.identifier]=o,o.global.x=(a.clientX-t.left)*(this.target.width/t.width),o.global.y=(a.clientY-t.top)*(this.target.height/t.height);var s=this.hitTest(o);s&&(o.currentDown=s,o.target=s,s.touchstart&&s.touchstart(o))}},PIXI.InteractionManager.prototype.onTouchEnd=function(e){e.preventDefault();for(var t=this.target.view.getBoundingClientRect(),r=e.changedTouches,i=0;r.length>i;i++){var a=r[i],o=this.touchs[a.identifier];if(o.global.x=(a.clientX-t.left)*(this.target.width/t.width),o.global.y=(a.clientY-t.top)*(this.target.height/t.height),o.currentDown){o.currentDown.touchend&&o.currentDown.touchend(o);var s=this.hitTest(o);s==o.currentDown&&o.currentDown.tap&&o.currentDown.tap(o),o.currentDown=null}this.pool.push(o),this.touchs[a.identifier]=null}},PIXI.InteractionData=function(){this.global=new PIXI.Point,this.local=new PIXI.Point,this.target},PIXI.InteractionData.constructor=PIXI.InteractionData,PIXI.Stage=function(e,t){PIXI.DisplayObjectContainer.call(this),this.worldTransform=PIXI.mat3.create(),this.__childrenAdded=[],this.__childrenRemoved=[],this.childIndex=0,this.stage=this,this.interactive=!!t,this.interactionManager=new PIXI.InteractionManager(this),this.setBackgroundColor(e)},PIXI.Stage.constructor=PIXI.Stage,PIXI.Stage.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),PIXI.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var e=0,t=this.children.length;t>e;e++)this.children[e].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0)},PIXI.Stage.prototype.setBackgroundColor=function(e){this.backgroundColor=e||0,this.backgroundColorSplit=HEXtoRGB(this.backgroundColor),this.backgroundColorString="#"+this.backgroundColor.toString(16)},PIXI.Stage.prototype.__addChild=function(e){if(e.interactive&&(this.dirty=!0),e.stage=this,e.children)for(var t=0;e.children.length>t;t++)this.__addChild(e.children[t])},PIXI.Stage.prototype.__removeChild=function(e){if(e.interactive&&(this.dirty=!0),this.__childrenRemoved.push(e),e.stage=void 0,e.children)for(var t=0,r=e.children.length;r>t;t++)this.__removeChild(e.children[t])},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){var e=Array.prototype.slice;return function(t){function r(){var o=a.concat(e.call(arguments));i.apply(this instanceof r?this:t,o)}var i=this,a=e.call(arguments,1);if("function"!=typeof i)throw new TypeError;return r.prototype=function o(e){return e&&(o.prototype=e),this instanceof o?void 0:new o}(i.prototype),r}}());var AjaxRequest=function(){var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new XMLHttpRequest:!1;for(var t=0;e.length>t;t++)try{return new ActiveXObject(e[t])}catch(r){}};PIXI.EventTarget=function(){var e={};this.addEventListener=this.on=function(t,r){void 0===e[t]&&(e[t]=[]),-1===e[t].indexOf(r)&&e[t].push(r)},this.dispatchEvent=this.emit=function(t){for(var r in e[t.type])e[t.type][r](t)},this.removeEventListener=this.off=function(t,r){var i=e[t].indexOf(r);-1!==i&&e[t].splice(i,1)}},determineMatrixArrayType(),PIXI.mat3={},PIXI.mat3.create=function(){var e=new PIXI.Matrix(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},PIXI.mat4={},PIXI.mat4.create=function(){var e=new PIXI.Matrix(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},PIXI.mat3.multiply=function(e,t,r){r||(r=e);var i=e[0],a=e[1],o=e[2],s=e[3],n=e[4],h=e[5],c=e[6],d=e[7],u=e[8],l=t[0],I=t[1],f=t[2],p=t[3],v=t[4],g=t[5],P=t[6],x=t[7],m=t[8];return r[0]=l*i+I*s+f*c,r[1]=l*a+I*n+f*d,r[2]=l*o+I*h+f*u,r[3]=p*i+v*s+g*c,r[4]=p*a+v*n+g*d,r[5]=p*o+v*h+g*u,r[6]=P*i+x*s+m*c,r[7]=P*a+x*n+m*d,r[8]=P*o+x*h+m*u,r},PIXI.mat3.toMat4=function(e,t){return t||(t=PIXI.mat4.create()),t[15]=1,t[14]=0,t[13]=0,t[12]=0,t[11]=0,t[10]=e[8],t[9]=e[7],t[8]=e[6],t[7]=0,t[6]=e[5],t[5]=e[4],t[4]=e[3],t[3]=0,t[2]=e[2],t[1]=e[1],t[0]=e[0],t},PIXI.mat4.create=function(){var e=new PIXI.Matrix(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},PIXI.mat4.transpose=function(e,t){if(!t||e===t){var r=e[1],i=e[2],a=e[3],o=e[6],s=e[7],n=e[11];return e[1]=e[4],e[2]=e[8],e[3]=e[12],e[4]=r,e[6]=e[9],e[7]=e[13],e[8]=i,e[9]=o,e[11]=e[14],e[12]=a,e[13]=s,e[14]=n,e}return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t},PIXI.mat4.multiply=function(e,t,r){r||(r=e);var i=e[0],a=e[1],o=e[2],s=e[3],n=e[4],h=e[5],c=e[6],d=e[7],u=e[8],l=e[9],I=e[10],f=e[11],p=e[12],v=e[13],g=e[14],P=e[15],x=t[0],m=t[1],b=t[2],X=t[3];return r[0]=x*i+m*n+b*u+X*p,r[1]=x*a+m*h+b*l+X*v,r[2]=x*o+m*c+b*I+X*g,r[3]=x*s+m*d+b*f+X*P,x=t[4],m=t[5],b=t[6],X=t[7],r[4]=x*i+m*n+b*u+X*p,r[5]=x*a+m*h+b*l+X*v,r[6]=x*o+m*c+b*I+X*g,r[7]=x*s+m*d+b*f+X*P,x=t[8],m=t[9],b=t[10],X=t[11],r[8]=x*i+m*n+b*u+X*p,r[9]=x*a+m*h+b*l+X*v,r[10]=x*o+m*c+b*I+X*g,r[11]=x*s+m*d+b*f+X*P,x=t[12],m=t[13],b=t[14],X=t[15],r[12]=x*i+m*n+b*u+X*p,r[13]=x*a+m*h+b*l+X*v,r[14]=x*o+m*c+b*I+X*g,r[15]=x*s+m*d+b*f+X*P,r},PIXI.autoDetectRenderer=function(e,t,r){e||(e=800),t||(t=600);var i=function(){try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(e){return!1}}();return i?new PIXI.WebGLRenderer(e,t,r):new PIXI.CanvasRenderer(e,t,r)},PIXI.shaderFragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));","gl_FragColor = gl_FragColor * vColor;","}"],PIXI.shaderVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform mat4 uMVMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void) {","gl_Position = uMVMatrix * vec4(aVertexPosition, 1.0, 1.0);","vTextureCoord = aTextureCoord;","vColor = aColor;","}"],PIXI.shaderFragmentSrcWater=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));","gl_FragColor = gl_FragColor * vColor;","}"],PIXI.shaderFragmentSrcWater=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform mat4 uMVMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void) {","gl_Position = uMVMatrix * vec4(aVertexPosition, 1.0, 1.0);","vTextureCoord = aTextureCoord;","vColor = aColor;","}"],PIXI.CompileVertexShader=function(e,t){for(var r="",i=0;t.length>i;i++)r+=t[i];var a;return a=e.createShader(e.VERTEX_SHADER),e.shaderSource(a,r),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS)?a:(alert(e.getShaderInfoLog(a)),null)},PIXI.CompileFragmentShader=function(e,t){for(var r="",i=0;t.length>i;i++)r+=t[i];var a;return a=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(a,r),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS)?a:(alert(e.getShaderInfoLog(a)),null)},PIXI._defaultFrame=new PIXI.Rectangle(0,0,1,1),PIXI.WebGLRenderer=function(e,t,r){this.width=e||800,this.height=t||600,this.view=r||document.createElement("canvas"),this.view.width=this.width,this.view.height=this.height,this.view.background="#FF0000";var i=this;this.view.addEventListener("webglcontextlost",function(e){i.handleContextLost(e)},!1),this.view.addEventListener("webglcontextrestored",function(e){i.handleContextRestored(e)},!1),this.batchs=[];try{this.gl=this.view.getContext("experimental-webgl",{alpha:!1})}catch(a){throw Error(" This browser does not support webGL. Try using the canvas renderer"+this)}var o=this.gl;PIXI.waterShaderProgram=this.waterShaderProgram=PIXI.getWaterShader(o),PIXI.shaderProgram=this.shaderProgram=PIXI.getDefaultShader(o),this.batch=new PIXI.WebGLBatch(o),o.disable(o.DEPTH_TEST),o.enable(o.BLEND),o.colorMask(!0,!0,!0,!1),this.projectionMatrix=PIXI.mat4.create(),this.resize(this.width,this.height),this.contextLost=!1},PIXI.WebGLRenderer.constructor=PIXI.WebGLRenderer,PIXI.WebGLRenderer.prototype.checkVisibility=function(e,t){for(var r=e.children,i=0;r.length>i;i++){var a=r[i],o=a.visible&&t;a.textureChange&&(a.textureChange=!1,o&&(this.removeDisplayObject(a),this.addDisplayObject(a))),a.cacheVisible!=o&&(a.cacheVisible=o,a.cacheVisible?this.addDisplayObject(a):this.removeDisplayObject(a)),a.children.length>0&&this.checkVisibility(a,o)}},PIXI.WebGLRenderer.prototype.renderDisplayObject=function(e,t){var r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,t.glFramebuffer);var i=this.projectionMatrix;i[5]=2/this.height,i[13]=-1,r.useProgram(PIXI.shaderProgram),r.uniformMatrix4fv(PIXI.shaderProgram.mvMatrixUniform,!1,this.projectionMatrix);for(var a=0;PIXI.texturesToUpdate.length>a;a++)this.updateTexture(PIXI.texturesToUpdate[a]);PIXI.texturesToUpdate=[],e.stage?this.renderFromStage(e):this.renderFromOutside(e,t),r.bindFramebuffer(r.FRAMEBUFFER,null),i[5]=-2/this.height,i[13]=1,r.uniformMatrix4fv(PIXI.shaderProgram.mvMatrixUniform,!1,this.projectionMatrix)},PIXI.WebGLRenderer.prototype.renderFromStage=function(e){this.gl,this.scope=e.stage;for(var t=0;stage.__childrenRemoved.length>t;t++)this.removeDisplayObject(stage.__childrenRemoved[t]);stage.__childrenRemoved=[],stage.__childrenAdded=[],this.checkVisibility(e,!0);var r=e.renderable?e:this.getNextRenderable(e),i=r.batch;i=r instanceof PIXI.Sprite?r.batch:r;for(var a,o=e,s=e;s.children.length>0;)s=s.children[s.children.length-1],s.renderable&&(o=s);a=o instanceof PIXI.Sprite?o.batch:o;var n=this.batchs.indexOf(i),h=this.batchs.indexOf(a),c=0,d=0,u=i.head;if(r==u);else if(i instanceof PIXI.WebGLBatch){for(;u.__next!=r;)c++,u=u.__next;n++}if(u=a.head,r==u);else if(a instanceof PIXI.WebGLBatch){for(;u.__next!=o;)u=u.__next,d++;if(h--,a==i)return i.render(c,d),void 0}i instanceof PIXI.WebGLBatch&&i.render(c);for(var t=n;h+1>t;t++)renderable=this.batchs[t],renderable instanceof PIXI.WebGLBatch?this.batchs[t].render():renderable instanceof PIXI.Strip&&renderable.visible&&this.renderStrip(renderable);a instanceof PIXI.WebGLBatch&&a.render(0,d)},PIXI.WebGLRenderer.prototype.renderFromOutside=function(e,t){e!=t.lastObject&&(t.lastObject=e,t.batchs=[]),this.gl;var r=this.batchs;this.batchs=t.batchs,this.scope=e,this.checkVisibility(e,!0);for(var i=0;this.batchs.length>i;i++)renderable=this.batchs[i],renderable instanceof PIXI.WebGLBatch?this.batchs[i].render():renderable instanceof PIXI.Strip&&renderable.visible&&this.renderStrip(renderable);this.batchs=r},PIXI.WebGLRenderer.prototype.render=function(e){if(!this.contextLost){this.scope=e;for(var t=0;e.__childrenRemoved.length>t;t++)this.removeDisplayObject(e.__childrenRemoved[t]);for(var t=0;PIXI.texturesToUpdate.length>t;t++)this.updateTexture(PIXI.texturesToUpdate[t]);e.__childrenRemoved=[],e.__childrenAdded=[],PIXI.texturesToUpdate=[],this.checkVisibility(e,!0),e.updateTransform();var r=this.gl;r.clear(r.COLOR_BUFFER_BIT),r.clearColor(e.backgroundColorSplit[0],e.backgroundColorSplit[1],e.backgroundColorSplit[2],1),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA);for(var t=0;this.batchs.length>t;t++)renderable=this.batchs[t],renderable instanceof PIXI.WebGLBatch?this.batchs[t].render():renderable instanceof PIXI.Strip&&renderable.visible&&this.renderStrip(renderable);e.interactive&&(e._interactiveEventsAdded||(e._interactiveEventsAdded=!0,e.interactionManager.setTarget(this)))}},PIXI.WebGLRenderer.prototype.updateTexture=function(e){if(!e.isRender){var t=this.gl;e._glTexture||(e._glTexture=t.createTexture()),e.hasLoaded&&(t.bindTexture(t.TEXTURE_2D,e._glTexture),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindTexture(t.TEXTURE_2D,null)),this.refreshBatchs=!0}},PIXI.WebGLRenderer.prototype.getNextRenderable=function(e,t){var r=e;do{if(0==r.children.length){for(;r.childIndex==r.parent.children.length-1;)if(r=r.parent,r==t){r=null;break}r&&(r=r.parent.children[r.childIndex+1])}else r=r.children[0];if(!r)break}while(!r.renderable||!r.__inWebGL);return r},PIXI.WebGLRenderer.prototype.getPreviousRenderable=function(e,t){var r=e;do{if(0==r.childIndex)r=r.parent;else for(r=r.parent.children[r.childIndex-1];0!=r.children.length;)r=r.children[r.children.length-1];if(r==t)break}while(!r.renderable||!r.__inWebGL);return r},PIXI.WebGLRenderer.prototype.addDisplayObject=function(e){if(!e.stage,!e.__inWebGL&&(e.batch=null,e.renderable)){e.__inWebGL=!0;var t=this.getPreviousRenderable(e,this.scope),r=this.getNextRenderable(e,this.scope);if(e instanceof PIXI.Sprite){var i,a;if(t instanceof PIXI.Sprite){if(i=t.batch,i&&i.texture==e.texture.baseTexture&&i.blendMode==e.blendMode&&i.filter==e.filter)return i.insertAfter(e,t),void 0}else i=t;if(r)if(r instanceof PIXI.Sprite){if(a=r.batch){if(a.texture==e.texture.baseTexture&&a.blendMode==e.blendMode&&a.blendMode==e.blendMode&&i.filter==e.filter)return a.insertBefore(e,r),void 0;if(a==i){var o=i.split(r),s=PIXI._getBatch(this.gl),n=this.batchs.indexOf(i);return s.init(e),this.batchs.splice(n+1,0,s,o),void 0}}}else a=r;var s=PIXI._getBatch(this.gl);if(s.init(e),i){var n=this.batchs.indexOf(i);this.batchs.splice(n+1,0,s)}else this.batchs.push(s)}else e instanceof PIXI.Strip&&(this.initStrip(e),this.batchs.push(e));this.batchUpdate=!0}},PIXI.WebGLRenderer.prototype.removeDisplayObject=function(e){if(e.cacheVisible=!1,e.renderable){e.__inWebGL=!1;var t;if(e instanceof PIXI.Sprite){var r=e.batch;if(!r)return;r.remove(e),0==r.size&&(t=r)}else t=e;if(t){var i=this.batchs.indexOf(t);if(-1==i)return;if(0==i||i==this.batchs.length-1)return this.batchs.splice(i,1),t instanceof PIXI.WebGLBatch&&PIXI._returnBatch(t),void 0;if(this.batchs[i-1]instanceof PIXI.WebGLBatch&&this.batchs[i+1]instanceof PIXI.WebGLBatch&&this.batchs[i-1].texture==this.batchs[i+1].texture&&this.batchs[i-1].blendMode==this.batchs[i+1].blendMode&&this.batchs[i-1].filter==this.batchs[i+1].filter)return this.batchs[i-1].merge(this.batchs[i+1]),t instanceof PIXI.WebGLBatch&&PIXI._returnBatch(t),PIXI._returnBatch(this.batchs[i+1]),this.batchs.splice(i,2),void 0;this.batchs.splice(i,1),t instanceof PIXI.WebGLBatch&&PIXI._returnBatch(t)}}},PIXI.WebGLRenderer.prototype.resize=function(e,t){this.width=e,this.height=t,this.view.width=e,this.view.height=t,this.gl.viewport(0,0,this.width,this.height);var r=this.projectionMatrix;r[0]=2/this.width,r[5]=-2/this.height,r[12]=-1,r[13]=1;var i=this.gl;i.useProgram(PIXI.shaderProgram),i.uniformMatrix4fv(PIXI.shaderProgram.mvMatrixUniform,!1,this.projectionMatrix),i.useProgram(PIXI.waterShaderProgram),i.uniformMatrix4fv(PIXI.waterShaderProgram.mvMatrixUniform,!1,this.projectionMatrix)},PIXI.WebGLRenderer.prototype.initStrip=function(e){var t=this.gl;this.shaderProgram,e._vertexBuffer=t.createBuffer(),e._indexBuffer=t.createBuffer(),e._uvBuffer=t.createBuffer(),e._colorBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,e.verticies,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,e._uvBuffer),t.bufferData(t.ARRAY_BUFFER,e.uvs,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,e._colorBuffer),t.bufferData(t.ARRAY_BUFFER,e.colors,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e.indices,t.STATIC_DRAW)},PIXI.WebGLRenderer.prototype.renderStrip=function(e){var t=this.gl,r=this.shaderProgram,i=PIXI.mat3.toMat4(e.worldTransform);PIXI.mat4.transpose(i),PIXI.mat4.multiply(this.projectionMatrix,i,i),t.useProgram(PIXI.shaderProgram),t.uniformMatrix4fv(PIXI.shaderProgram.mvMatrixUniform,!1,i),e.blendMode==PIXI.blendModes.NORMAL?t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA):t.blendFunc(t.ONE,t.ONE_MINUS_SRC_COLOR),e.dirty?(e.dirty=!1,t.bindBuffer(t.ARRAY_BUFFER,e._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,e.verticies,t.STATIC_DRAW),t.vertexAttribPointer(r.vertexPositionAttribute,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,e._uvBuffer),t.bufferData(t.ARRAY_BUFFER,e.uvs,t.STATIC_DRAW),t.vertexAttribPointer(r.textureCoordAttribute,2,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e.texture.baseTexture._glTexture),t.bindBuffer(t.ARRAY_BUFFER,e._colorBuffer),t.bufferData(t.ARRAY_BUFFER,e.colors,t.STATIC_DRAW),t.vertexAttribPointer(r.colorAttribute,1,t.FLOAT,!1,0,0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e.indices,t.STATIC_DRAW)):(t.bindBuffer(t.ARRAY_BUFFER,e._vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,e.verticies),t.vertexAttribPointer(r.vertexPositionAttribute,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,e._uvBuffer),t.vertexAttribPointer(r.textureCoordAttribute,2,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e.texture.baseTexture._glTexture),t.bindBuffer(t.ARRAY_BUFFER,e._colorBuffer),t.vertexAttribPointer(r.colorAttribute,1,t.FLOAT,!1,0,0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e._indexBuffer)),t.drawElements(t.TRIANGLE_STRIP,e.indices.length,t.UNSIGNED_SHORT,0),t.uniformMatrix4fv(this.shaderProgram.mvMatrixUniform,!1,this.projectionMatrix)},PIXI.WebGLRenderer.prototype.handleContextLost=function(e){e.preventDefault(),this.contextLost=!0},PIXI.WebGLRenderer.prototype.handleContextRestored=function(){this.gl=this.view.getContext("experimental-webgl",{alpha:!0}),this.initShaders();for(var e=0;PIXI.TextureCache.length>e;e++)this.updateTexture(PIXI.TextureCache[e]);for(var e=0;this.batchs.length>e;e++)this.batchs[e].restoreLostContext(this.gl),this.batchs[e].dirty=!0;PIXI._restoreBatchs(this.gl),this.contextLost=!1},PIXI._batchs=[],PIXI._getBatch=function(e){return 0==PIXI._batchs.length?new PIXI.WebGLBatch(e):PIXI._batchs.pop()},PIXI._returnBatch=function(e){e.clean(),PIXI._batchs.push(e)},PIXI._restoreBatchs=function(e){for(var t=0;PIXI._batchs.length>t;t++)PIXI._batchs[t].restoreLostContext(e)},PIXI.WebGLBatch=function(e){this.gl=e,this.size=0,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.uvBuffer=e.createBuffer(),this.colorBuffer=e.createBuffer(),this.blendMode=PIXI.blendModes.NORMAL,this.dynamicSize=1},PIXI.WebGLBatch.constructor=PIXI.WebGLBatch,PIXI.WebGLBatch.prototype.clean=function(){this.verticies=[],this.uvs=[],this.indices=[],this.colors=[],this.dynamicSize=1,this.texture=null,this.last=null,this.size=0,this.head,this.tail},PIXI.WebGLBatch.prototype.restoreLostContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.uvBuffer=e.createBuffer(),this.colorBuffer=e.createBuffer()},PIXI.WebGLBatch.prototype.init=function(e){e.batch=this,this.dirty=!0,this.blendMode=e.blendMode,this.texture=e.texture.baseTexture,this.head=e,this.tail=e,this.size=1,this.program=e.filter?PIXI.waterShaderProgram:PIXI.shaderProgram,this.growBatch()},PIXI.WebGLBatch.prototype.insertBefore=function(e,t){this.size++,e.batch=this,this.dirty=!0;var r=t.__prev;t.__prev=e,e.__next=t,r?(e.__prev=r,r.__next=e):this.head=e},PIXI.WebGLBatch.prototype.insertAfter=function(e,t){this.size++,e.batch=this,this.dirty=!0;var r=t.__next;t.__next=e,e.__prev=t,r?(e.__next=r,r.__prev=e):this.tail=e},PIXI.WebGLBatch.prototype.remove=function(e){return this.size--,0==this.size?(e.batch=null,e.__prev=null,e.__next=null,void 0):(e.__prev?e.__prev.__next=e.__next:(this.head=e.__next,this.head.__prev=null),e.__next?e.__next.__prev=e.__prev:(this.tail=e.__prev,this.tail.__next=null),e.batch=null,e.__next=null,e.__prev=null,this.dirty=!0,void 0)},PIXI.WebGLBatch.prototype.split=function(e){this.dirty=!0;var t=new PIXI.WebGLBatch(this.gl);t.init(e),t.tail=this.tail,this.tail=e.__prev,this.tail.__next=null,e.__prev=null;for(var r=0;e;)r++,e.batch=t,e=e.__next;return t.size=r,this.size-=r,t},PIXI.WebGLBatch.prototype.merge=function(e){this.dirty=!0,this.tail.__next=e.head,e.head.__prev=this.tail,this.size+=e.size,this.tail=e.tail;for(var t=e.head;t;)t.batch=this,t=t.__next},PIXI.WebGLBatch.prototype.growBatch=function(){var e=this.gl;this.dynamicSize=1==this.size?1:1.5*this.size,this.verticies=new Float32Array(8*this.dynamicSize),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.verticies,e.DYNAMIC_DRAW),this.uvs=new Float32Array(8*this.dynamicSize),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvs,e.DYNAMIC_DRAW),this.dirtyUVS=!0,this.colors=new Float32Array(4*this.dynamicSize),e.bindBuffer(e.ARRAY_BUFFER,this.colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colors,e.DYNAMIC_DRAW),this.dirtyColors=!0,this.indices=new Uint16Array(6*this.dynamicSize);for(var t=this.indices.length/6,r=0;t>r;r++){var i=6*r,a=4*r;this.indices[i+0]=a+0,this.indices[i+1]=a+1,this.indices[i+2]=a+2,this.indices[i+3]=a+0,this.indices[i+4]=a+2,this.indices[i+5]=a+3}e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)},PIXI.WebGLBatch.prototype.refresh=function(){this.gl,this.dynamicSize<this.size&&this.growBatch();for(var e,t=0,r=this.head;r;){e=8*t;var i=r.texture,a=i.frame,o=i.baseTexture.width,s=i.baseTexture.height;this.uvs[e+0]=a.x/o,this.uvs[e+1]=a.y/s,this.uvs[e+2]=(a.x+a.width)/o,this.uvs[e+3]=a.y/s,this.uvs[e+4]=(a.x+a.width)/o,this.uvs[e+5]=(a.y+a.height)/s,this.uvs[e+6]=a.x/o,this.uvs[e+7]=(a.y+a.height)/s,r.updateFrame=!1,colorIndex=4*t,this.colors[colorIndex]=this.colors[colorIndex+1]=this.colors[colorIndex+2]=this.colors[colorIndex+3]=r.worldAlpha,r=r.__next,t++}this.dirtyUVS=!0,this.dirtyColors=!0},PIXI.WebGLBatch.prototype.update=function(){this.gl;for(var e,t,r,i,a,o,s,n,h,c,d,u,l,I,f,p,v=0,g=this.head;g;){if(t=g.width,r=g.height,i=g.anchor.x,a=g.anchor.y,o=t*(1-i),s=t*-i,n=r*(1-a),h=r*-a,c=8*v,e=g.worldTransform,d=e[0],u=e[3],l=e[1],I=e[4],f=e[2],p=e[5],this.verticies[c+0]=d*s+l*h+f,this.verticies[c+1]=I*h+u*s+p,this.verticies[c+2]=d*o+l*h+f,this.verticies[c+3]=I*h+u*o+p,this.verticies[c+4]=d*o+l*n+f,this.verticies[c+5]=I*n+u*o+p,this.verticies[c+6]=d*s+l*n+f,this.verticies[c+7]=I*n+u*s+p,g.updateFrame){this.dirtyUVS=!0;var P=g.texture,x=P.frame,m=P.baseTexture.width,b=P.baseTexture.height;
this.uvs[c+0]=x.x/m,this.uvs[c+1]=x.y/b,this.uvs[c+2]=(x.x+x.width)/m,this.uvs[c+3]=x.y/b,this.uvs[c+4]=(x.x+x.width)/m,this.uvs[c+5]=(x.y+x.height)/b,this.uvs[c+6]=x.x/m,this.uvs[c+7]=(x.y+x.height)/b,g.updateFrame=!1}if(g.cacheAlpha!=g.worldAlpha){g.cacheAlpha=g.worldAlpha;var X=4*v;this.colors[X]=this.colors[X+1]=this.colors[X+2]=this.colors[X+3]=g.worldAlpha,this.dirtyColors=!0}v++,g=g.__next}},PIXI.WebGLBatch.prototype.render=function(e,t){if(e=e||0,t=t||this.size,this.dirty&&(this.refresh(),this.dirty=!1),0!=this.size){this.update();var r=this.gl;this.blendMode==PIXI.blendModes.NORMAL?r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA):"w"==this.blendMode&&r.blendFunc(r.ONE,r.ONE);var i=this.program;r.useProgram(i),r.bindBuffer(r.ARRAY_BUFFER,this.vertexBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.verticies),r.vertexAttribPointer(i.vertexPositionAttribute,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.uvBuffer),this.dirtyUVS&&(this.dirtyUVS=!1,r.bufferSubData(r.ARRAY_BUFFER,0,this.uvs)),r.vertexAttribPointer(i.textureCoordAttribute,2,r.FLOAT,!1,0,0),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.texture._glTexture),r.bindBuffer(r.ARRAY_BUFFER,this.colorBuffer),this.dirtyColors&&(this.dirtyColors=!1,r.bufferSubData(r.ARRAY_BUFFER,0,this.colors)),r.vertexAttribPointer(i.colorAttribute,1,r.FLOAT,!1,0,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var a=t-e;r.drawElements(r.TRIANGLES,6*a,r.UNSIGNED_SHORT,6*2*e)}},PIXI.shaderFragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));","gl_FragColor = gl_FragColor * vColor;","}"],PIXI.shaderVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform mat4 uMVMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void) {","gl_Position = uMVMatrix * vec4(aVertexPosition, 1.0, 1.0);","vTextureCoord = aTextureCoord;","vColor = aColor;","}"],PIXI.getDefaultShader=function(e){var t=PIXI.CompileFragmentShader(e,PIXI.shaderFragmentSrc),r=PIXI.CompileVertexShader(e,PIXI.shaderVertexSrc);return shaderProgram=e.createProgram(),e.attachShader(shaderProgram,r),e.attachShader(shaderProgram,t),e.linkProgram(shaderProgram),e.getProgramParameter(shaderProgram,e.LINK_STATUS)||alert("Could not initialise shaders"),e.useProgram(shaderProgram),shaderProgram.vertexPositionAttribute=e.getAttribLocation(shaderProgram,"aVertexPosition"),e.enableVertexAttribArray(shaderProgram.vertexPositionAttribute),shaderProgram.textureCoordAttribute=e.getAttribLocation(shaderProgram,"aTextureCoord"),e.enableVertexAttribArray(shaderProgram.textureCoordAttribute),shaderProgram.colorAttribute=e.getAttribLocation(shaderProgram,"aColor"),e.enableVertexAttribArray(shaderProgram.colorAttribute),shaderProgram.mvMatrixUniform=e.getUniformLocation(shaderProgram,"uMVMatrix"),shaderProgram.samplerUniform=e.getUniformLocation(shaderProgram,"uSampler"),shaderProgram},PIXI.shaderWaterFragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float uWave;","uniform sampler2D uSampler;","void main(void) {","float offset = sin( ( vTextureCoord.y + uWave ) * 40.0) * 0.005;","float offset2 = cos( ( vTextureCoord.x - (uWave)) * 50.0) * 0.005;","gl_FragColor = texture2D(uSampler, vec2( vTextureCoord.x - offset , vTextureCoord.y - offset2));","gl_FragColor = gl_FragColor * vColor;","}"],PIXI.shaderWaterVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform mat4 uMVMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void) {","gl_Position = uMVMatrix * vec4(aVertexPosition, 1.0, 1.0);","vTextureCoord = aTextureCoord;","vColor = aColor ;","}"],PIXI.getWaterShader=function(e){var t=PIXI.CompileFragmentShader(e,PIXI.shaderWaterFragmentSrc),r=PIXI.CompileVertexShader(e,PIXI.shaderWaterVertexSrc);return shaderProgram=e.createProgram(),e.attachShader(shaderProgram,r),e.attachShader(shaderProgram,t),e.linkProgram(shaderProgram),e.getProgramParameter(shaderProgram,e.LINK_STATUS)||alert("Could not initialise shaders"),e.useProgram(shaderProgram),shaderProgram.vertexPositionAttribute=e.getAttribLocation(shaderProgram,"aVertexPosition"),e.enableVertexAttribArray(shaderProgram.vertexPositionAttribute),shaderProgram.textureCoordAttribute=e.getAttribLocation(shaderProgram,"aTextureCoord"),e.enableVertexAttribArray(shaderProgram.textureCoordAttribute),shaderProgram.colorAttribute=e.getAttribLocation(shaderProgram,"aColor"),e.enableVertexAttribArray(shaderProgram.colorAttribute),shaderProgram.mvMatrixUniform=e.getUniformLocation(shaderProgram,"uMVMatrix"),shaderProgram.samplerUniform=e.getUniformLocation(shaderProgram,"uSampler"),shaderProgram.waveUniform=e.getUniformLocation(shaderProgram,"uWave"),e.uniform1f(shaderProgram.waveUniform,.5),shaderProgram},PIXI.CanvasRenderer=function(e,t,r){this.width=e||800,this.height=t||600,this.refresh=!0,this.view=r||document.createElement("canvas"),this.view.width=this.width,this.view.height=this.height,this.count=0,this.context=this.view.getContext("2d")},PIXI.CanvasRenderer.constructor=PIXI.CanvasRenderer,PIXI.CanvasRenderer.prototype.render=function(e){e.__childrenAdded=[],e.__childrenRemoved=[],PIXI.texturesToUpdate=[],this.context.setTransform(1,0,0,1,0,0),e.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.view.style.backgroundColor!=e.backgroundColorString&&(this.view.style.backgroundColor=e.backgroundColorString),this.context.clearRect(0,0,this.width,this.height),this.renderDisplayObject(e),e.interactive&&(e._interactiveEventsAdded||(e._interactiveEventsAdded=!0,e.interactionManager.setTarget(this)))},PIXI.CanvasRenderer.prototype.resize=function(e,t){this.width=e,this.height=t,this.view.width=e,this.view.height=t},PIXI.CanvasRenderer.prototype.renderDisplayObject=function(e){var t=e.worldTransform,r=this.context;r.globalCompositeOperation="source-over";var i=!1;if(e.visible){if(e instanceof PIXI.Sprite){var a=e.texture.frame;a&&(r.globalAlpha=e.worldAlpha,i=!1,r.setTransform(t[0],t[3],t[1],t[4],t[2],t[5]),r.drawImage(e.texture.baseTexture.source,a.x,a.y,a.width,a.height,(e.anchor.x-e.texture.trim.x)*-a.width,(e.anchor.y-e.texture.trim.y)*-a.height,e.width,e.height))}else e instanceof PIXI.Strip&&(r.setTransform(t[0],t[3],t[1],t[4],t[2],t[5]),this.renderStrip(e));for(var o=0;e.children.length>o;o++)this.renderDisplayObject(e.children[o])}},PIXI.CanvasRenderer.prototype.renderStripFlat=function(e){var t=this.context,r=e.verticies;e.uvs;var i=r.length/2;this.count++,t.beginPath();for(var a=1;i-2>a;a++){var o=2*a,s=r[o],n=r[o+2],h=r[o+4],c=r[o+1],d=r[o+3],u=r[o+5];t.moveTo(s,c),t.lineTo(n,d),t.lineTo(h,u)}t.fillStyle="#FF0000",t.fill(),t.closePath()},PIXI.CanvasRenderer.prototype.renderStrip=function(e){var t=this.context;t.globalAlpha=1;var r=e.verticies,i=e.uvs,a=r.length/2;this.count++;for(var o=1;a-2>o;o++){var s=2*o,n=r[s],h=r[s+2],c=r[s+4],d=r[s+1],u=r[s+3],l=r[s+5],I=i[s]*e.texture.width,f=i[s+2]*e.texture.width,p=i[s+4]*e.texture.width,v=i[s+1]*e.texture.height,g=i[s+3]*e.texture.height,P=i[s+5]*e.texture.height;t.save(),t.beginPath(),t.moveTo(n,d),t.lineTo(h,u),t.lineTo(c,l),t.closePath(),t.clip();var x=I*g+v*p+f*P-g*p-v*f-I*P,m=n*g+v*c+h*P-g*c-v*h-n*P,b=I*h+n*p+f*c-h*p-n*f-I*c,X=I*g*c+v*h*p+n*f*P-n*g*p-v*f*c-I*h*P,T=d*g+v*l+u*P-g*l-v*u-d*P,_=I*u+d*p+f*l-u*p-d*f-I*l,y=I*g*l+v*u*p+d*f*P-d*g*p-v*f*l-I*u*P;t.transform(m/x,T/x,b/x,_/x,X/x,y/x),t.drawImage(e.texture.baseTexture.source,0,0),t.restore()}},PIXI.Strip=function(e,t,r){PIXI.DisplayObjectContainer.call(this),this.texture=e,this.blendMode=PIXI.blendModes.NORMAL;try{this.uvs=new Float32Array([0,1,1,1,1,0,0,1]),this.verticies=new Float32Array([0,0,0,0,0,0,0,0,0]),this.colors=new Float32Array([1,1,1,1]),this.indices=new Uint16Array([0,1,2,3])}catch(i){this.uvs=[0,1,1,1,1,0,0,1],this.verticies=[0,0,0,0,0,0,0,0,0],this.colors=[1,1,1,1],this.indices=[0,1,2,3]}this.width=t,this.height=r,e.baseTexture.hasLoaded?(this.width=this.texture.frame.width,this.height=this.texture.frame.height,this.updateFrame=!0):(this.onTextureUpdateBind=this.onTextureUpdate.bind(this),this.texture.addEventListener("update",this.onTextureUpdateBind)),this.renderable=!0},PIXI.Strip.constructor=PIXI.Strip,PIXI.Strip.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),PIXI.Strip.prototype.setTexture=function(e){this.texture=e,this.width=e.frame.width,this.height=e.frame.height,this.updateFrame=!0},PIXI.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},PIXI.Rope=function(e,t){PIXI.Strip.call(this,e),this.points=t,this.width=50;try{this.verticies=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length)}catch(r){this.verticies=verticies,this.uvs=uvs,this.colors=colors,this.indices=indices}this.refresh()},PIXI.Rope.constructor=PIXI.Rope,PIXI.Rope.prototype=Object.create(PIXI.Strip.prototype),PIXI.Rope.prototype.refresh=function(){var e=this.points;if(!(1>e.length)){var t=this.uvs,r=this.indices,i=this.colors,a=e[0],o=e[0];this.count-=.2,t[0]=0,t[1]=1,t[2]=0,t[3]=1,i[0]=1,i[1]=1,r[0]=0,r[1]=1;for(var s=e.length,n=1;s>n;n++){var o=e[n],h=4*n,c=n/(s-1);n%2?(t[h]=c,t[h+1]=0,t[h+2]=c,t[h+3]=1):(t[h]=c,t[h+1]=0,t[h+2]=c,t[h+3]=1),h=2*n,i[h]=1,i[h+1]=1,h=2*n,r[h]=h,r[h+1]=h+1,a=o}}},PIXI.Rope.prototype.updateTransform=function(){var e=this.points;if(!(1>e.length)){var t,r=this.verticies,i=e[0],a={x:0,y:0},o=e[0];this.count-=.2,r[0]=o.x+a.x,r[1]=o.y+a.y,r[2]=o.x-a.x,r[3]=o.y-a.y;for(var s=e.length,n=1;s>n;n++){var o=e[n],h=4*n;t=e.length-1>n?e[n+1]:o,a.y=-(t.x-i.x),a.x=t.y-i.y;var c=10*(1-n/(s-1));c>1&&(c=1);var d=Math.sqrt(a.x*a.x+a.y*a.y),u=this.width/2;a.x/=d,a.y/=d,a.x*=u,a.y*=u,r[h]=o.x+a.x,r[h+1]=o.y+a.y,r[h+2]=o.x-a.x,r[h+3]=o.y-a.y,i=o}PIXI.DisplayObjectContainer.prototype.updateTransform.call(this)}},PIXI.Rope.prototype.setTexture=function(e){this.texture=e,this.updateFrame=!0},PIXI.BaseTextureCache={},PIXI.texturesToUpdate=[],PIXI.BaseTexture=function(e){if(PIXI.EventTarget.call(this),this.width=100,this.height=100,this.source=e,this.source instanceof Image)if(this.source.complete)this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,PIXI.texturesToUpdate.push(this);else{var t=this;this.source.onload=function(){t.hasLoaded=!0,t.width=t.source.width,t.height=t.source.height,PIXI.texturesToUpdate.push(t),t.dispatchEvent({type:"loaded",content:t})}}else this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,PIXI.texturesToUpdate.push(this)},PIXI.BaseTexture.constructor=PIXI.BaseTexture,PIXI.BaseTexture.prototype.fromImage=function(){},PIXI.TextureCache={},PIXI.FrameCache={},PIXI.Texture=function(e,t){if(PIXI.EventTarget.call(this),t||(this.noFrame=!0,t=new PIXI.Rectangle(0,0,1,1)),this.trim=new PIXI.Point,this.baseTexture=e,this.frame=t,this.scope=this,e.hasLoaded)this.noFrame&&(t=new PIXI.Rectangle(0,0,e.width,e.height)),this.setFrame(t);else{var r=this;e.addEventListener("loaded",function(){r.onBaseTextureLoaded()})}},PIXI.Texture.constructor=PIXI.Texture,PIXI.Texture.prototype.onBaseTextureLoaded=function(){var e=this.baseTexture;e.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new PIXI.Rectangle(0,0,e.width,e.height)),this.noFrame=!1,this.width=this.frame.width,this.height=this.frame.height,this.scope.dispatchEvent({type:"update",content:this})},PIXI.Texture.prototype.setFrame=function(e){if(this.frame=e,this.width=e.width,this.height=e.height,e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height)throw Error("Texture Error: frame does not fit inside the base Texture dimensions "+this)},PIXI.Texture.fromImage=function(e,t){var r=PIXI.TextureCache[e];if(!r){var i=PIXI.BaseTextureCache[e];if(!i){var a=new Image;t&&(a.crossOrigin=""),a.src=e,i=new PIXI.BaseTexture(a),PIXI.BaseTextureCache[e]=i}r=new PIXI.Texture(i),PIXI.TextureCache[e]=r}return r},PIXI.Texture.fromFrame=function(e){var t=PIXI.TextureCache[e];if(!t)throw Error("The frameId '"+e+"' does not exist in the texture cache "+this);return t},PIXI.Texture.fromCanvas=function(e){var t=PIXI.TextureCache[e];if(!t){var r=PIXI.BaseTextureCache[e];r||(r=new PIXI.BaseTexture(e),PIXI.BaseTextureCache[e]=r),t=new PIXI.Texture(r),PIXI.TextureCache[e]=t}return t},PIXI.Texture.addTextureToCache=function(e,t){PIXI.TextureCache[t]=e},PIXI.Texture.removeTextureFromCache=function(e){var t=PIXI.TextureCache[e];return PIXI.TextureCache[e]=null,t},PIXI.TextureCache={},PIXI.FrameCache={},PIXI.RenderTexture=function(e,t){PIXI.EventTarget.call(this),this.width=e,this.height=t,this.renderer=renderer,this.frame=new PIXI.Rectangle(0,0,this.width,this.height);var r=renderer.gl;this.glFramebuffer=r.createFramebuffer(),r.bindFramebuffer(r.FRAMEBUFFER,this.glFramebuffer),this.glFramebuffer.width=e,this.glFramebuffer.height=t,this.view=document.createElement("canvas"),this.baseTexture=new PIXI.BaseTexture(this.view),this.baseTexture.width=e,this.baseTexture.height=t,this.baseTexture._glTexture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.baseTexture._glTexture),r.texImage2D(r.TEXTURE_2D,0,r.RGB,this.glFramebuffer.width,this.glFramebuffer.height,0,r.RGB,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),this.baseTexture.isRender=!0,r.bindFramebuffer(r.FRAMEBUFFER,this.glFramebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.baseTexture._glTexture,0)},PIXI.RenderTexture.constructor=PIXI.RenderTexture,PIXI.RenderTexture.prototype=Object.create(PIXI.Texture.prototype),PIXI.RenderTexture.prototype.render=function(e){var t=e.children;e.worldTransform=PIXI.mat3.create();for(var r=0,i=t.length;i>r;r++)t[r].updateTransform();this.renderer.renderDisplayObject(e,this)},PIXI.SpriteSheetLoader=function(e){PIXI.EventTarget.call(this),this.url=e,this.baseUrl=e.replace(/[^\/]*$/,""),this.texture,this.frames={},this.crossorigin=!1},PIXI.SpriteSheetLoader.constructor=PIXI.SpriteSheetLoader,PIXI.SpriteSheetLoader.prototype.load=function(){this.ajaxRequest=new AjaxRequest;var e=this;this.ajaxRequest.onreadystatechange=function(){e.onLoaded()},this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},PIXI.SpriteSheetLoader.prototype.onLoaded=function(){if(4==this.ajaxRequest.readyState&&(200==this.ajaxRequest.status||-1==window.location.href.indexOf("http"))){var jsondata=eval("("+this.ajaxRequest.responseText+")"),textureUrl=this.baseUrl+jsondata.meta.image;this.texture=PIXI.Texture.fromImage(textureUrl,this.crossorigin).baseTexture;var frameData=jsondata.frames;for(var i in frameData){var rect=frameData[i].frame;PIXI.TextureCache[i]=new PIXI.Texture(this.texture,{x:rect.x,y:rect.y,width:rect.w,height:rect.h}),frameData[i].trimmed&&(PIXI.TextureCache[i].realSize=frameData[i].spriteSourceSize,PIXI.TextureCache[i].trim.x=0)}if(this.texture.hasLoaded)this.dispatchEvent({type:"loaded",content:this});else{var scope=this;this.texture.addEventListener("loaded",function(){scope.dispatchEvent({type:"loaded",content:scope})})}}},PIXI.AssetLoader=function(e){PIXI.EventTarget.call(this),this.assetURLs=e,this.assets=[],this.crossorigin=!1},PIXI.AssetLoader.constructor=PIXI.AssetLoader,PIXI.AssetLoader.prototype.load=function(){this.loadCount=this.assetURLs.length;for(var e=["jpeg","jpg","png","gif"],t=["json"],r=0;this.assetURLs.length>r;r++){for(var i=this.assetURLs[r],a=i.split(".").pop().toLowerCase(),o=null,s=0;e.length>s;s++)if(a==e[s]){o="img";break}if("img"!=o)for(var s=0;t.length>s;s++)if(a==t[s]){o="atlas";break}if("img"==o){var n=PIXI.Texture.fromImage(i,this.crossorigin);if(n.baseTexture.hasLoaded)this.loadCount--,0==this.loadCount&&(this.dispatchEvent({type:"onComplete",content:this}),this.onComplete&&this.onComplete());else{var h=this;n.baseTexture.addEventListener("loaded",function(){h.onAssetLoaded()}),this.assets.push(n)}}else{if("atlas"!=o)throw Error(i+" is an unsupported file type "+this);var c=new PIXI.SpriteSheetLoader(i);c.crossorigin=this.crossorigin,this.assets.push(c);var h=this;c.addEventListener("loaded",function(){h.onAssetLoaded()}),c.load()}}},PIXI.AssetLoader.prototype.onAssetLoaded=function(){this.loadCount--,this.dispatchEvent({type:"onProgress",content:this}),this.onProgress&&this.onProgress(),0==this.loadCount&&(this.dispatchEvent({type:"onComplete",content:this}),this.onComplete&&this.onComplete())};